{"ast":null,"code":"import * as i0 from \"@angular/core\";\nconst _c0 = [\"agentAssistGenAI\"];\nconst _c1 = [\"agentAssistMonitor\"];\nconst _c2 = [\"log\"];\nexport let WidgetAPIComponent = /*#__PURE__*/(() => {\n  class WidgetAPIComponent {\n    constructor(changeDetectorRef, element, renderer) {\n      this.changeDetectorRef = changeDetectorRef;\n      this.element = element;\n      this.renderer = renderer;\n      this.message = '';\n      this.dispositionCodes = [];\n      this.voiceDispositionCodes = [];\n      this.workCodes = [];\n      this.emailWorkCodes = [];\n      this.additionalWorkCodes = [];\n      this.notReadyReasonCodes = [];\n      this.systemReasonCodes = [];\n      this.interactionId = this.element.nativeElement.getAttribute('interactionid');\n      this.widgetAPI = window.WS.widgetAPI(this.interactionId);\n    }\n    ngAfterViewInit() {\n      //this.widgetAPI.sendChatMessage(\"お世話になっています。お客様担当の田中です。\");\n      const p = this.renderer.createElement('p');\n      p.innerHTML = `<iframe id=\"external_page1\" title=\"Inline Frame1\" width=\"100%\" height=\"400\" frameborder=\"0\" src=\"https://demo.avayaphone.net/widgets/widget1.html\"></iframe>`;\n      this.renderer.insertBefore(this.agentAssistGenAI.nativeElement, p, this.agentAssistGenAI.nativeElement.children[0], true);\n      p.innerHTML = `<iframe id=\"external_page2\" title=\"Inline Frame2\" width=\"100%\" height=\"500\" frameborder=\"0\" src=\"/https://demo.avayaphone.net/webtools/admin.html\"></iframe>`;\n      this.renderer.insertBefore(this.agentAssistMonitor.nativeElement, p, this.agentAssistMonitor.nativeElement.children[0], true);\n    }\n    /*\n    onclick_getCardNumber(e: any) {\n        this.widgetAPI.sendChatMessage(\"ご登録のスマホで、カード番号を入力してください。\");\n        const p: HTMLParagraphElement = this.renderer.createElement('p');\n        p.innerHTML = `<iframe id=\"external_page1\" title=\"Inline Frame\" width=\"100%\" height=\"300px\" frameborder=\"0\" src=\"https://demo.avayaphone.net/widgets/widget1.html\"></iframe>`;\n        this.renderer.insertBefore(this.agentAssistGenAI.nativeElement, p, this.agentAssistGenAI.nativeElement.children[0], true);\n    }\n    \n    onclick_imageAnalysis(e: any) {\n        this.widgetAPI.sendChatMessage(\"ご登録のスマホで、画像読み取り画面を開いてください。\");\n    }\n    */\n    onclick_sendGenAIResult(text) {\n      this.widgetAPI.sendChatMessage(text);\n    }\n    dumpJsonData(eventName, data) {\n      const event = Object.assign({}, data);\n      console.log(JSON.stringify(event));\n      const h = JSON.stringify(event).replace(/</g, \"\").replace(/>/g, \"\");\n      const p = this.renderer.createElement('p');\n      p.innerHTML = `<b>${eventName}</b><br/>${h}<br/><br/>`;\n      //this.renderer.appendChild(this.widgetLog.nativeElement, p);\n      this.renderer.insertBefore(this.widgetLog.nativeElement, p, this.widgetLog.nativeElement.children[0], true);\n    }\n    onclick_metadata(e) {\n      this.dumpJsonData(\"Metadata\", this.metadata);\n      this.metadata = this.widgetAPI.getMetadata('widgetAPI');\n    }\n    onclick_capabilities(e) {\n      this.dumpJsonData(\"Capabilities\", this.capabilities);\n      this.capabilities = this.widgetAPI.getCapabilities();\n    }\n    onclick_configuration(e) {\n      this.dumpJsonData(\"Configuration\", this.configuration);\n      this.configuration = this.widgetAPI.getConfiguration();\n    }\n    onclick_dispositionCodes(e) {\n      this.dumpJsonData(\"DispositionCodes\", this.dispositionCodes);\n      this.dispositionCodes = this.widgetAPI.getDispositionCodes();\n    }\n    onclick_voiceDispositionCodes(e) {\n      this.dumpJsonData(\"VoiceDispositionCodes\", this.voiceDispositionCodes);\n      this.voiceDispositionCodes = this.widgetAPI.getDispositionCodes('VOICE');\n    }\n    onclick_workCodes(e) {\n      this.dumpJsonData(\"WorkCodes\", this.workCodes);\n      this.workCodes = this.widgetAPI.getWorkCodes();\n    }\n    onclick_emailWorkCodes(e) {\n      this.dumpJsonData(\"EmailWorkCodes\", this.emailWorkCodes);\n      this.emailWorkCodes = this.widgetAPI.getWorkCodes('EMAIL');\n    }\n    onclick_additionalWorkCodes(e) {\n      this.dumpJsonData(\"AdditionalWorkCodes\", this.additionalWorkCodes);\n      this.additionalWorkCodes = this.widgetAPI.getAdditionalWorkCodes();\n    }\n    onclick_notReadyReasonCodes(e) {\n      this.dumpJsonData(\"NotReadyReasonCodes\", this.notReadyReasonCodes);\n      this.notReadyReasonCodes = this.widgetAPI.getNotReadyReasonCodes();\n    }\n    onclick_systemReasonCodes(e) {\n      this.dumpJsonData(\"SystemReasonCodes\", this.systemReasonCodes);\n      this.systemReasonCodes = this.widgetAPI.getSystemReasonCodes();\n    }\n    onclick_interactionData(e) {\n      this.dumpJsonData(\"InteractionData\", this.interactionData);\n      this.interactionData = this.widgetAPI.getInteractionData();\n    }\n    onclick_clientDetails(e) {\n      this.dumpJsonData(\"ClientDetails\", this.clientDetails);\n      this.clientDetails = this.widgetAPI.getClientDetails();\n    }\n    onclick_sendChatMessage(e, text) {\n      this.dumpJsonData(\"SendChatMessage\", {\n        text: text\n      });\n      this.widgetAPI.sendChatMessage(text);\n    }\n    onclick_sendMessage(e, text) {\n      this.dumpJsonData(\"SendMessage\", {\n        text: text\n      });\n      this.widgetAPI.sendMessage(text);\n    }\n    onclick_sendMessageToAnyWidget(e, text) {\n      this.dumpJsonData(\"SendMessageToAnyWidget\", {\n        text: text\n      });\n      this.widgetAPI.sendMessageToAnyWidget(text);\n    }\n    ngOnInit() {\n      // Interaction event fired when a new interaction is created or has been updated\n      this.widgetAPI.onDataEvent('onInteractionEvent', data => {\n        this.interaction = data;\n        this.dumpJsonData(\"onInteractionEvent\", this.interaction);\n        this.changeDetectorRef.detectChanges();\n      });\n      // Interaction ended event fired when the interaction card has ended\n      this.widgetAPI.onDataEvent('onInteractionEndedEvent', data => {\n        this.interactionEnded = data;\n        this.dumpJsonData(\"onInteractionEndedEvent\", this.interactionEnded);\n        this.changeDetectorRef.detectChanges();\n      });\n      // Interaction context data\n      this.widgetAPI.onDataEvent('onContextDataEvent', data => {\n        this.context = data;\n        this.dumpJsonData(\"onContextDataEvent\", this.context);\n        this.changeDetectorRef.detectChanges();\n      });\n      // Media data from chat, sms, email, social\n      this.widgetAPI.onDataEvent('onMediaEvent', data => {\n        this.media = data;\n        this.dumpJsonData(\"onMediaEvent\", this.media);\n        this.changeDetectorRef.detectChanges();\n      });\n      // Media message data from chat, sms, email, social\n      this.widgetAPI.onDataEvent('onMediaMessageEvent', data => {\n        this.mediaMessage = data;\n        this.dumpJsonData(\"onMediaMessageEvent\", this.mediaMessage);\n        this.changeDetectorRef.detectChanges();\n      });\n      // Triggered on agent state changes\n      this.widgetAPI.onDataEvent('onAgentStateEvent', data => {\n        this.agent = data;\n        this.dumpJsonData(\"onAgentStateEvent\", this.agent);\n        this.changeDetectorRef.detectChanges();\n      });\n      // Triggered when the widget receives a message from another widget\n      this.widgetAPI.onDataEvent('onMessageEvent', data => {\n        this.widgetMessage = data;\n        this.dumpJsonData(\"onMessageEvent\", this.widgetMessage);\n        this.changeDetectorRef.detectChanges();\n      });\n      // Triggered on navigation change\n      this.widgetAPI.onDataEvent('onNavigationEvent', data => {\n        this.navigation = data;\n        this.dumpJsonData(\"onNavigationEvent\", this.navigation);\n        this.changeDetectorRef.detectChanges();\n      });\n      // Triggered when capabilities have updated\n      this.widgetAPI.onDataEvent('onCapabilitiesEvent', data => {\n        this.capabilities = data;\n        this.dumpJsonData(\"onCapabilitiesEvent\", this.capabilities);\n        this.changeDetectorRef.detectChanges();\n      });\n      // Event fired when a custom card is deleted\n      this.widgetAPI.onDataEvent('onCustomCardDeletedEvent', data => {\n        this.customCardDeleted = data;\n        this.dumpJsonData(\"onCustomCardDeletedEvent\", this.customCardDeleted);\n        this.changeDetectorRef.detectChanges();\n      });\n      // Triggered when card is focused\n      this.widgetAPI.onDataEvent('onCardFocusedEvent', data => {\n        this.interaction = data;\n        this.dumpJsonData(\"onCardFocusedEvent\", this.interaction);\n        this.changeDetectorRef.detectChanges();\n      });\n    }\n    // Send a message to another widget under the same interaction context\n    sendNotification() {\n      this.widgetAPI.sendMessage('Sample Widget Message: ' + this.message);\n      this.widgetAPI.sendNotification('Sample Widget Message: ' + this.message, 'info');\n      this.dumpJsonData(\"interactionEnded\", this.interactionEnded);\n    }\n    // Send a message to any other widget not constrained by interaction context\n    sendNotificationToAnyWidget() {\n      //this.widgetAPI.sendMessageToAnyWidget('Sample Any Widget Message: ' + this.anyWidgetMessage);\n      //this.widgetAPI.sendNotification('Sample Any Widget Message: ' + this.anyWidgetMessage, 'warning');\n    }\n    ngOnDestroy() {\n      ;\n    }\n  }\n  WidgetAPIComponent.ɵfac = function WidgetAPIComponent_Factory(t) {\n    return new (t || WidgetAPIComponent)(i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i0.Renderer2));\n  };\n  WidgetAPIComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: WidgetAPIComponent,\n    selectors: [[\"app-widget-api\"]],\n    viewQuery: function WidgetAPIComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n        i0.ɵɵviewQuery(_c1, 5);\n        i0.ɵɵviewQuery(_c2, 5);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.agentAssistGenAI = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.agentAssistMonitor = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.widgetLog = _t.first);\n      }\n    },\n    decls: 59,\n    vars: 0,\n    consts: [[\"id\", \"widget1\", 1, \"disp\", 2, \"position\", \"relative\", \"width\", \"100%\", \"height\", \"100%\"], [\"id\", \"widget-default\", 1, \"neo-widget__content\", \"disp\"], [1, \"neo-widget__header\"], [1, \"neo-widget__header-left\"], [1, \"neo-widget__body\", \"neo-widget__body\", 2, \"width\", \"100%\", \"height\", \"100%\"], [\"id\", \"agentAssistGenAI\"], [\"agentAssistGenAI\", \"\"], [\"id\", \"agentAssistMonitor\", 2, \"margin-top\", \"20px\"], [\"agentAssistMonitor\", \"\"], [\"onsubmit\", \"$('#message').val('');return false;\", 1, \"neo-form\", 2, \"padding\", \"0px\"], [1, \"neo-form-control\"], [1, \"neo-input-group\"], [1, \"row\"], [1, \"neo-btn\", \"neo-btn-tertiary\", \"neo-btn-tertiary--default\", 3, \"click\"], [\"id\", \"test\", 1, \"neo-btn\", \"neo-btn-tertiary\", \"neo-btn-tertiary--default\"], [1, \"neo-form-control\", \"neo-form-control--textarea\", 2, \"margin-left\", \"20px\"], [\"id\", \"message\", \"placeholder\", \"message\", 1, \"neo-input\", 2, \"width\", \"400px\"], [\"message\", \"\"], [\"for\", \"isjsonformat\", 1, \"neo-switch\", 2, \"margin\", \"20px\"], [\"id\", \"isjsonformat\", \"type\", \"checkbox\", \"role\", \"switch\"], [\"isjsonformat\", \"\"], [1, \"neo-switch__icon\"], [2, \"width\", \"100%\", \"height\", \"300px\", \"padding\", \"10px\", \"overflow\", \"hidden\", \"overflow-y\", \"auto\", \"word-break\", \"break-all\", \"background-color\", \"#eee\"], [\"id\", \"log\"], [\"log\", \"\"]],\n    template: function WidgetAPIComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        const _r5 = i0.ɵɵgetCurrentView();\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2);\n        i0.ɵɵelement(3, \"div\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"div\", 4);\n        i0.ɵɵelement(5, \"div\", 5, 6)(7, \"div\", 7, 8);\n        i0.ɵɵelementStart(9, \"form\", 9)(10, \"div\", 10)(11, \"div\", 11)(12, \"div\", 12)(13, \"button\", 13);\n        i0.ɵɵlistener(\"click\", function WidgetAPIComponent_Template_button_click_13_listener($event) {\n          return ctx.onclick_metadata($event);\n        });\n        i0.ɵɵtext(14, \"getMetadata()\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"button\", 13);\n        i0.ɵɵlistener(\"click\", function WidgetAPIComponent_Template_button_click_15_listener($event) {\n          return ctx.onclick_capabilities($event);\n        });\n        i0.ɵɵtext(16, \"getCapabilities()\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"button\", 13);\n        i0.ɵɵlistener(\"click\", function WidgetAPIComponent_Template_button_click_17_listener($event) {\n          return ctx.onclick_configuration($event);\n        });\n        i0.ɵɵtext(18, \"getConfiguration()\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"button\", 13);\n        i0.ɵɵlistener(\"click\", function WidgetAPIComponent_Template_button_click_19_listener($event) {\n          return ctx.onclick_dispositionCodes($event);\n        });\n        i0.ɵɵtext(20, \"getDispositionCodes()\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"button\", 13);\n        i0.ɵɵlistener(\"click\", function WidgetAPIComponent_Template_button_click_21_listener($event) {\n          return ctx.onclick_voiceDispositionCodes($event);\n        });\n        i0.ɵɵtext(22, \"getDispositionCodes(VOICE)\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(23, \"button\", 13);\n        i0.ɵɵlistener(\"click\", function WidgetAPIComponent_Template_button_click_23_listener($event) {\n          return ctx.onclick_workCodes($event);\n        });\n        i0.ɵɵtext(24, \"getWorkCodes()\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(25, \"button\", 13);\n        i0.ɵɵlistener(\"click\", function WidgetAPIComponent_Template_button_click_25_listener($event) {\n          return ctx.onclick_emailWorkCodes($event);\n        });\n        i0.ɵɵtext(26, \"getWorkCodes(EMAIL)\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(27, \"button\", 13);\n        i0.ɵɵlistener(\"click\", function WidgetAPIComponent_Template_button_click_27_listener($event) {\n          return ctx.onclick_additionalWorkCodes($event);\n        });\n        i0.ɵɵtext(28, \"getAdditionalWorkCodes()\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(29, \"button\", 13);\n        i0.ɵɵlistener(\"click\", function WidgetAPIComponent_Template_button_click_29_listener($event) {\n          return ctx.onclick_notReadyReasonCodes($event);\n        });\n        i0.ɵɵtext(30, \"getNotReadyReasonCodes()\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(31, \"button\", 13);\n        i0.ɵɵlistener(\"click\", function WidgetAPIComponent_Template_button_click_31_listener($event) {\n          return ctx.onclick_systemReasonCodes($event);\n        });\n        i0.ɵɵtext(32, \"getSystemReasonCodes()\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(33, \"button\", 13);\n        i0.ɵɵlistener(\"click\", function WidgetAPIComponent_Template_button_click_33_listener($event) {\n          return ctx.onclick_interactionData($event);\n        });\n        i0.ɵɵtext(34, \"getInteractionData()\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(35, \"button\", 13);\n        i0.ɵɵlistener(\"click\", function WidgetAPIComponent_Template_button_click_35_listener($event) {\n          return ctx.onclick_clientDetails($event);\n        });\n        i0.ɵɵtext(36, \"getClientDetails()\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(37, \"button\", 13);\n        i0.ɵɵlistener(\"click\", function WidgetAPIComponent_Template_button_click_37_listener($event) {\n          i0.ɵɵrestoreView(_r5);\n          const _r2 = i0.ɵɵreference(50);\n          return i0.ɵɵresetView(ctx.onclick_sendChatMessage($event, _r2.value));\n        });\n        i0.ɵɵtext(38, \"sendChatMessage(message)\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(39, \"button\", 13);\n        i0.ɵɵlistener(\"click\", function WidgetAPIComponent_Template_button_click_39_listener($event) {\n          i0.ɵɵrestoreView(_r5);\n          const _r2 = i0.ɵɵreference(50);\n          return i0.ɵɵresetView(ctx.onclick_sendMessage($event, _r2.value));\n        });\n        i0.ɵɵtext(40, \"sendMessage(message)\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(41, \"button\", 13);\n        i0.ɵɵlistener(\"click\", function WidgetAPIComponent_Template_button_click_41_listener($event) {\n          i0.ɵɵrestoreView(_r5);\n          const _r2 = i0.ɵɵreference(50);\n          return i0.ɵɵresetView(ctx.onclick_sendMessageToAnyWidget($event, _r2.value));\n        });\n        i0.ɵɵtext(42, \"sendMessageToAnyWidget(message)\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(43, \"button\", 14);\n        i0.ɵɵtext(44, \"test\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(45, \"div\", 10)(46, \"div\", 11)(47, \"div\", 12)(48, \"div\", 15);\n        i0.ɵɵelement(49, \"textarea\", 16, 17);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(51, \"label\", 18);\n        i0.ɵɵelement(52, \"input\", 19, 20)(54, \"i\", 21);\n        i0.ɵɵtext(55, \"JSON Format \");\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(56, \"div\", 22);\n        i0.ɵɵelement(57, \"div\", 23, 24);\n        i0.ɵɵelementEnd()()()();\n      }\n    }\n  });\n  WidgetAPIComponent.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: WidgetAPIComponent,\n    factory: WidgetAPIComponent.ɵfac\n  });\n  return WidgetAPIComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}